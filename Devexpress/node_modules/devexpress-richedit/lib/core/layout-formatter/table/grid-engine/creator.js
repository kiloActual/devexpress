"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var grid_calculator_auto_1 = require("./calculators/grid-calculator-auto");
var grid_calculator_fixed_1 = require("./calculators/grid-calculator-fixed");
var table_properties_cache_1 = require("./calculators/table-properties-cache");
var grid_1 = require("./grid");
function createGrid(table, boxIterator, avaliableSpacing, innerClientProperties) {
    var subDocument = boxIterator.subDocument;
    var grid = new grid_1.Grid(table);
    var cache = {};
    cache[table.index] = new table_properties_cache_1.TablePropertiesCache(subDocument.documentModel, table, grid, innerClientProperties);
    var endPos = table.getEndPosition();
    for (var i = table.index + 1, innerTable = void 0; (innerTable = subDocument.tables[i]) && innerTable.getStartPosition() < endPos; i++)
        cache[innerTable.index] = new table_properties_cache_1.TablePropertiesCache(subDocument.documentModel, innerTable, new grid_1.Grid(innerTable), innerClientProperties);
    var currentCache = cache[table.index];
    grid.columns = new (currentCache.isFixedAlgoritm ? grid_calculator_fixed_1.GridCalculatorFixed : grid_calculator_auto_1.GridCalculatorAuto)(grid, cache, boxIterator, avaliableSpacing)
        .getColumns();
    return grid;
}
exports.createGrid = createGrid;
