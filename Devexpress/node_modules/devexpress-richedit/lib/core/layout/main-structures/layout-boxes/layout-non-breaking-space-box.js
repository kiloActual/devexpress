"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var string_1 = require("@devexpress/utils/lib/utils/string");
var measure_info_1 = require("../../../measurer/measure-info");
var layout_box_1 = require("./layout-box");
var LayoutNonBreakingSpaceBox = (function (_super) {
    tslib_1.__extends(LayoutNonBreakingSpaceBox, _super);
    function LayoutNonBreakingSpaceBox() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    LayoutNonBreakingSpaceBox.prototype.equals = function (obj) {
        return _super.prototype.equals.call(this, obj) &&
            this.spaceWidth == obj.spaceWidth &&
            this.hiddenSpaceWidth == obj.hiddenSpaceWidth;
    };
    LayoutNonBreakingSpaceBox.prototype.clone = function () {
        var newObj = new LayoutNonBreakingSpaceBox(this.characterProperties, this.colorInfo);
        newObj.copyFrom(this);
        return newObj;
    };
    LayoutNonBreakingSpaceBox.prototype.copyFrom = function (obj) {
        _super.prototype.copyFrom.call(this, obj);
        this.spaceWidth = obj.spaceWidth;
        this.hiddenSpaceWidth = obj.hiddenSpaceWidth;
    };
    LayoutNonBreakingSpaceBox.prototype.getType = function () {
        return layout_box_1.LayoutBoxType.NonBreakingSpace;
    };
    LayoutNonBreakingSpaceBox.prototype.pushInfoForMeasure = function (info, showHiddenSymbols) {
        info.push(new measure_info_1.MeasureInfoNonText("&nbsp;", this.characterProperties));
        if (showHiddenSymbols)
            info.push(new measure_info_1.MeasureInfoNonText(LayoutNonBreakingSpaceBox.SYMBOL, this.characterProperties));
    };
    LayoutNonBreakingSpaceBox.prototype.popInfoForMeasure = function (info, showHiddenSymbols) {
        this.hiddenSpaceWidth = showHiddenSymbols ? info.pop().resultSize.width : 0;
        var elem = info.pop();
        this.setSize(elem.resultSize);
        this.spaceWidth = elem.resultSize.width;
    };
    LayoutNonBreakingSpaceBox.prototype.isVisible = function () {
        return true;
    };
    LayoutNonBreakingSpaceBox.prototype.isVisibleForRowAlign = function () {
        return true;
    };
    LayoutNonBreakingSpaceBox.prototype.renderGetContent = function (_renderer) {
        var numNbsps = Math.ceil((this.width - this.hiddenSpaceWidth) / Math.max(1, this.spaceWidth));
        return (this.hiddenSpaceWidth > 0 ? LayoutNonBreakingSpaceBox.SYMBOL : "") +
            string_1.StringUtils.repeat("&nbsp;", numNbsps);
    };
    LayoutNonBreakingSpaceBox.prototype.renderIsWordBox = function () {
        return true;
    };
    LayoutNonBreakingSpaceBox.prototype.isWhitespace = function () {
        return true;
    };
    LayoutNonBreakingSpaceBox.prototype.isLineBreak = function () {
        return false;
    };
    LayoutNonBreakingSpaceBox.SYMBOL = "Ëš";
    return LayoutNonBreakingSpaceBox;
}(layout_box_1.LayoutBox));
exports.LayoutNonBreakingSpaceBox = LayoutNonBreakingSpaceBox;
