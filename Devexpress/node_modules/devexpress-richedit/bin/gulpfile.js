/**
* DevExpress WebRichEdit (gulpfile.js)
* Version: 21.2.3
* Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED
* License: https://www.devexpress.com/Support/EULAs
*/
const path = require('path');
const gulp = require('gulp');
const concatCss = require('gulp-concat-css');
const minifyCSS = require('gulp-minify-css');

const richEditDist = path.resolve(__dirname, '..', 'dist');
const devextremeDist = path.resolve(__dirname, '..', '..', 'devextreme', 'dist');

const customDist = path.resolve(richEditDist, 'custom');

gulp.task('build-css', function () {
    return gulp.src([
            path.resolve(devextremeDist, 'css', 'dx.common.css'),
            path.resolve(devextremeDist, 'css', 'dx.light.css'),
            path.resolve(richEditDist, 'dx.richedit.css'),
        ])
        .pipe(concatCss('dx.richedit.css', { rebaseUrls: false }))
        .pipe(minifyCSS())
        .pipe(gulp.dest(customDist));
});

gulp.task('copy-icons', () => {
    return gulp.src([
        path.join(richEditDist, 'icons/**/*'),
        path.join(devextremeDist, 'css', 'icons/**/*')])
        .pipe(gulp.dest(path.join(customDist, 'icons')));
});

gulp.task('concatenate-css', gulp.series('build-css', 'copy-icons'));