/**
* DevExpress Dashboard (_range-filter-item-helper.js)
* Version:  21.2.3
* Build date: Oct 25, 2021
* Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED
* License: https://www.devexpress.com/Support/EULAs/universal.xml
*/
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var _knockout_utils_1 = require("../../internal/_knockout-utils");
exports._subscribeToDimension = function (dimension, dateTimePeriods, dataManager) {
    _knockout_utils_1.safeSubscribe({
        dimension: dimension,
        dateTimePeriods: dateTimePeriods,
        dataManager: dataManager
    }, function (args) {
        setPeriodFirstDayOfWeek(args.dimension, args.dateTimePeriods, args.dataManager);
        var subscriptions = args.dimension ?
            args.dateTimePeriods.map(function (curPeriod) { return curPeriod._subscribeToGroupInterval(args.dimension); }) : [];
        return { dispose: function () { subscriptions.forEach(function (s) { return s.dispose(); }); } };
    });
};
var setPeriodFirstDayOfWeek = function (dimension, dateTimePeriods, dataManager) {
    var metaData = dataManager && dataManager.getMetaData();
    var dimensionUniqueName = dimension && dimension.uniqueName();
    var dimensionFormat = metaData && metaData.getDimensionFormat(dimensionUniqueName);
    var firstDayOfWeek = dimensionFormat && dimensionFormat.DateTimeFormat && dimensionFormat.DateTimeFormat.FirstDayOfWeek;
    if (firstDayOfWeek) {
        dateTimePeriods.forEach(function (period) { return period._firstDayOfWeek(firstDayOfWeek); });
    }
};
